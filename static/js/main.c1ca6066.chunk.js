(this["webpackJsonpreact-sliding-puzzle"]=this["webpackJsonpreact-sliding-puzzle"]||[]).push([[0],{12:function(e,s,t){},38:function(e,s,t){"use strict";t.r(s);var i=t(2),r=t.n(i),l=t(22),o=t.n(l),n=t(3),h=t(4),a=t(7),c=t(6),u=t(5),p=(t(12),t(8)),v=t(10),f=t(1),b={background:"#fff",border:"1px solid #999",float:"left",fontSize:"24px",fontWeight:"bold",lineHeight:"34px",height:"34px",margin:"-1px -1px",padding:"0",textAlign:"center",width:"34px",display:"block",position:"absolute"},d={border:"1px solid #999",opacity:0},y=function(e){Object(c.a)(t,e);var s=Object(u.a)(t);function t(){return Object(n.a)(this,t),s.apply(this,arguments)}return Object(h.a)(t,[{key:"render",value:function(){var e=this,s={translateX:Object(v.spring)(this.props.visualPosition.x),translateY:Object(v.spring)(this.props.visualPosition.y)},t=Object(p.a)(Object(p.a)({},b),0===this.props.value?d:{});return Object(f.jsx)(v.Motion,{style:s,children:function(s){var i=s.translateX,r=s.translateY;return Object(f.jsx)("button",{style:Object(p.a)(Object(p.a)({},t),{},{WebkitTransform:"translate3d(".concat(i,"px, ").concat(r,"px,0)"),transform:"translate3d(".concat(i,"px, ").concat(r,"px,0)")}),onClick:e.props.onClick,children:e.props.value})}})}}]),t}(r.a.Component),z=function(e){Object(c.a)(t,e);var s=Object(u.a)(t);function t(){return Object(n.a)(this,t),s.apply(this,arguments)}return Object(h.a)(t,[{key:"tiles",value:function(){for(var e=this.props.squares.length,s=this.props.squares.length,t=0,i=0,r=[],l=0;l<e*s;l++){if(null===this.props.squares[t][i])return Object(f.jsx)("div",{children:"Loading"});r.push(this.renderSquare(t,i)),++i===e&&(i=0,t++)}return r}},{key:"renderSquare",value:function(e,s){var t=this,i={x:2+33*s,y:2+33*e};return Object(f.jsx)(y,{value:this.props.squares[e][s],visualPosition:i,onClick:function(){return t.props.onClick(e,s)}},this.props.squares[e][s])}},{key:"render",value:function(){var e={clear:"both",content:"",display:"table",border:"2px solid #999",padding:16.5*this.props.size+"px"};return Object(f.jsxs)("div",{children:[this.tiles(),Object(f.jsx)("div",{style:e})]})}}]),t}(r.a.Component),A=t(0),m=t.n(A),x=function e(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:-1,y:-1},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:-1,y:-1},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.MAX_SAFE_INTEGER;Object(n.a)(this,e),this.pos=s,this.number=t,this.back=i,this.solved=r,this.f=l},j=function e(s,t,i){Object(n.a)(this,e),this.history=m.a.cloneDeep(i),this.arr=m.a.cloneDeep(s),this.size=t,this.solvedArr=this.prepareSolved(this.size),this.cellArr=this.preparePuzzleSolver(this.arr)};j.prototype.prepareSolved=function(e){for(var s=new Array(e).fill(null),t=1,i=0;i<e;i++){s[i]=new Array(e).fill(null);for(var r=0;r<e;r++)s[i][r]=t,t++}return s[e-1][e-1]=0,m.a.cloneDeep(s)},j.prototype.preparePuzzleSolver=function(e){for(var s=new Array(this.size).fill(null),t=0;t<this.size;t++){s[t]=new Array(this.size).fill(null);for(var i=0;i<this.size;i++)s[t][i]=new x({x:i,y:t},e[t][i])}return m.a.cloneDeep(s)},j.prototype.findNumber=function(e){for(var s=0;s<this.cellArr.length;s++)for(var t=0;t<this.cellArr.length;t++)if(this.cellArr[s][t].number===e)return m.a.cloneDeep(this.cellArr[s][t]);return new x},j.prototype.solve=function(){for(var e=0;e<this.size-2;e++)this.solveTop(e),this.solveLeft(e);return this.solveSmallPuzzle()?m.a.cloneDeep(this.history):null},j.prototype.solveTop=function(e){for(var s=0;s<this.size-2;s++)this.cellArr[e][s].solved||(this.solveNumber(this.solvedArr[e][s],{x:s,y:e}),this.cellArr[e][s].solved=!0);this.solveNumber(this.solvedArr[e][this.size-1],{x:this.size-1,y:e+2}),this.solveNumber(this.solvedArr[e][this.size-2],{x:this.size-2,y:e+2}),this.solveNumber(this.solvedArr[e][this.size-2],{x:this.size-1,y:e}),this.cellArr[e][this.size-1].solved=!0,this.solveNumber(this.solvedArr[e][this.size-1],{x:this.size-1,y:e+1}),this.cellArr[e+1][this.size-1].solved=!0,this.solveNumber(this.solvedArr[this.size-1][this.size-1],{x:this.size-2,y:e}),this.cellArr[e][this.size-1].solved=!1,this.cellArr[e+1][this.size-1].solved=!1,this.swapNumber(this.size-2,e,this.size-1,e),this.swapNumber(this.size-1,e,this.size-1,e+1),this.cellArr[e][this.size-2].solved=!0,this.cellArr[e][this.size-1].solved=!0},j.prototype.solveLeft=function(e){for(var s=0;s<this.size-2;s++)this.cellArr[s][e].solved||(this.solveNumber(this.solvedArr[s][e],{x:e,y:s}),this.cellArr[s][e].solved=!0);this.solveNumber(this.solvedArr[this.size-1][e],{x:e+2,y:this.size-1}),this.solveNumber(this.solvedArr[this.size-2][e],{x:e+2,y:this.size-2}),this.solveNumber(this.solvedArr[this.size-2][e],{x:e,y:this.size-1}),this.cellArr[this.size-1][e].solved=!0,this.solveNumber(this.solvedArr[this.size-1][e],{x:e+1,y:this.size-1}),this.cellArr[this.size-1][e+1].solved=!0,this.solveNumber(this.solvedArr[this.size-1][this.size-1],{x:e,y:this.size-2}),this.cellArr[this.size-1][e].solved=!1,this.cellArr[this.size-1][e+1].solved=!1,this.swapNumber(e,this.size-2,e,this.size-1),this.swapNumber(e,this.size-1,e+1,this.size-1),this.cellArr[this.size-2][e].solved=!0,this.cellArr[this.size-1][e].solved=!0},j.prototype.solveSmallPuzzle=function(){for(var e=0,s=this.findNumber(0),t=new x;!m.a.isEqual(this.solvedArr,this.arr);)s=this.findNumber(0),t=new x,e<12?(s.pos.y===this.size-2&&s.pos.x===this.size-2&&(t=m.a.cloneDeep(this.cellArr[this.size-1][this.size-2])),s.pos.y===this.size-1&&s.pos.x===this.size-2&&(t=m.a.cloneDeep(this.cellArr[this.size-1][this.size-1])),s.pos.y===this.size-1&&s.pos.x===this.size-1&&(t=m.a.cloneDeep(this.cellArr[this.size-2][this.size-1])),s.pos.y===this.size-2&&s.pos.x===this.size-1&&(t=m.a.cloneDeep(this.cellArr[this.size-2][this.size-2]))):(s.pos.y===this.size-1&&s.pos.x===this.size-2&&(t=m.a.cloneDeep(this.cellArr[this.size-1][this.size-3])),s.pos.y===this.size-1&&s.pos.x===this.size-3&&(t=m.a.cloneDeep(this.cellArr[this.size-2][this.size-1])),s.pos.y===this.size-2&&s.pos.x===this.size-3&&(t=m.a.cloneDeep(this.cellArr[this.size-2][this.size-2])),s.pos.y===this.size-2&&s.pos.x===this.size-2&&(t=m.a.cloneDeep(this.cellArr[this.size-1][this.size-2]))),e++,this.swapNumber(s.pos.x,s.pos.y,t.pos.x,t.pos.y);return!!m.a.isEqual(this.solvedArr,this.arr)},j.prototype.solveNumber=function(e,s){for(var t=Number.MAX_SAFE_INTEGER;this.cellArr[s.y][s.x].number!==e;){var i=this.findNumber(0),r=this.findNumber(e),l=new x,o=r.pos.x,n=r.pos.y,h=[0,0,-1,1],a=[-1,1,0,0];t=Number.MAX_SAFE_INTEGER;for(var c=0,u=0,p=0;p<4;p++)c=o+h[p],u=n+a[p],this.isValid(this.size,this.size,u,c)&&!this.cellArr[u][c].solved&&t>this.manhattanDistance(this.cellArr[u][c].pos,s)&&(l=this.cellArr[u][c],t=this.manhattanDistance(this.cellArr[u][c].pos,s));for(var v=this.aStar(l,i,r,null),f=0;f<v.length;f++)this.swapNumber(v[f].pos.x,v[f].pos.y,i.pos.x,i.pos.y),i=this.cellArr[v[f].pos.y][v[f].pos.x];0!==e&&this.swapNumber(l.pos.x,l.pos.y,r.pos.x,r.pos.y)}},j.prototype.isValid=function(e,s,t,i){return t>=0&&t<e&&i>=0&&i<s},j.prototype.manhattanDistance=function(e,s){return Math.abs(e.y-s.y)+Math.abs(e.x-s.x)},j.prototype.aStar=function(e,s,t,i){"object"!==typeof i&&"undefined"!==typeof i&&0!==i.length||(i=new Array(1).fill(null)),this.cellArr[s.pos.y][s.pos.x].f=0;var r=[];for(r.push(m.a.cloneDeep(this.cellArr[s.pos.y][s.pos.x]));r.length>0;){var l=r.pop();if(l.pos.x===e.pos.x&&l.pos.y===e.pos.y)break;for(var o=l.pos.x,n=l.pos.y,h=[0,0,-1,1],a=[-1,1,0,0],c=0,u=0,p=0;p<4;p++)c=o+h[p],u=n+a[p],this.isValid(this.size,this.size,u,c)&&!m.a.isEqual(l.back,this.cellArr[u][c].pos)&&!m.a.includes(i,this.cellArr[u][c].number)&&!this.cellArr[u][c].solved&&!m.a.isEqual(t.pos,{x:c,y:u})&&this.cellArr[u][c].f>l.f+1&&(this.cellArr[u][c].f=l.f+1,this.cellArr[u][c].back=m.a.cloneDeep(l.pos),r.push(m.a.cloneDeep(this.cellArr[u][c])),r.sort((function(e,s){return e.f-s.f})))}var v=[];e=m.a.cloneDeep(this.cellArr[e.pos.y][e.pos.x]);do{v.push(e),this.isValid(this.size,this.size,e.back.y,e.back.x)&&(e=m.a.cloneDeep(this.cellArr[e.back.y][e.back.x]))}while(-1!==e.back.x||-1!==e.back.y);for(var f=0;f<this.size;f++)for(var b=0;b<this.size;b++)this.cellArr[f][b].back={x:-1,y:-1},this.cellArr[f][b].f=Number.MAX_SAFE_INTEGER;return v.reverse(),v},j.prototype.swapNumber=function(e,s,t,i){e===t&&s===i||(this.arr[s][e]+=this.arr[i][t],this.arr[i][t]=this.arr[s][e]-this.arr[i][t],this.arr[s][e]-=this.arr[i][t],this.cellArr[s][e].number+=this.cellArr[i][t].number,this.cellArr[i][t].number=this.cellArr[s][e].number-this.cellArr[i][t].number,this.cellArr[s][e].number-=this.cellArr[i][t].number,this.history.push({squares:m.a.cloneDeep(this.arr)}))};var N=function(e){Object(c.a)(t,e);var s=Object(u.a)(t);function t(e){var i;Object(n.a)(this,t),i=s.call(this,e);var r=Array(3).fill(null);return i.state={history:[{squares:Array(3).fill(null).map((function(){return r.slice()}))}],solvedArr:Array(3).fill(null),size:3,stepNumber:0,counter:0,interval:null,temp:0},i.shuffle=i.shuffle.bind(Object(a.a)(i)),i.solvePuzzle=i.solvePuzzle.bind(Object(a.a)(i)),i}return Object(h.a)(t,[{key:"componentDidMount",value:function(){this.shuffle(),this.prepareSolved(this.state.size)}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.interval)}},{key:"jumpTo",value:function(e){e>this.state.history.length-1&&(e=this.state.history.length-1),e<0&&(e=0),this.setState({stepNumber:e,temp:e})}},{key:"prepareSolved",value:function(e){for(var s=new Array(e).fill(null),t=1,i=0;i<e;i++){s[i]=new Array(e).fill(null);for(var r=0;r<e;r++)s[i][r]=t,t++}return s[e-1][e-1]=0,this.setState({solvedArr:m.a.cloneDeep(s)}),s}},{key:"solved",value:function(e){return!!m.a.isEqual(this.state.solvedArr,e)}},{key:"swap",value:function(e,s){for(var t=this.state.stepNumber,i=this.state.history.slice(0,t+1),r=i[t],l=this.state.size,o=m.a.cloneDeep(r.squares.slice()),n={x:-1,y:-1},h=0;h<o.length;h++)for(var a=0;a<o.length;a++)0===o[h][a]&&(n={x:a,y:h});if(Math.abs(n.y-e)+Math.abs(n.x-s)===1){var c=o[n.y][n.x];o[n.y][n.x]=o[e][s],o[e][s]=c;var u=Array(l).fill(0).map((function(){return new Array(l).fill(0)}));for(h=0;h<l;h++)for(a=0;a<l;a++)u[h][a]=m.a.clone(o[h][a]);this.setState({history:i.concat({squares:o}),stepNumber:t+1,temp:t+1})}}},{key:"shuffle",value:function(){for(var e=this.state.size,s=m.a.range(0,e*e),t=0;0===t||t%2===1;){t=0,s=m.a.shuffle(s);for(var i=0;i<s.length;i++)for(var r=i+1;r<s.length;r++)0!==s[i]&&0!==s[r]&&s[i]>s[r]&&t++}for(var l=Array(e).fill(0).map((function(s){return new Array(e).fill(0)})),o=0,n=0;n<e;n++)for(var h=0;h<e;h++)l[n][h]=s[o],o++;this.setState({history:[{squares:m.a.cloneDeep(l)}],stepNumber:0,temp:0})}},{key:"solvePuzzle",value:function(e,s,t){var i=this,r=new j(e,s,t).solve();this.setState({history:r}),console.log("solved"),this.interval=setInterval((function(){i.state.stepNumber<i.state.history.length-1?i.jumpTo(i.state.stepNumber+1):clearInterval(i.state.interval)}),300),this.setState({interval:this.interval})}},{key:"handleStepNumberInput",value:function(e){this.setState({temp:e.target.value}),"Enter"===e.key&&(e.target.value>=0&&e.target.value<this.state.history.length-1?this.jumpTo(this.state.temp):this.setState({temp:this.state.stepNumber}))}},{key:"render",value:function(){var e=this,s=this.state.stepNumber,t=this.state.history.slice(0,s+1),i=t[s],r=this.state.size,l=Object(f.jsx)("button",{onClick:function(){return e.solvePuzzle(t[t.length-1].squares,r,t)},children:"solve"});this.solved(i.squares)&&(l=Object(f.jsx)("button",{onClick:this.shuffle,children:"restart"}));return Object(f.jsxs)("div",{className:"game",children:[Object(f.jsx)("div",{className:"game-board",children:Object(f.jsx)(z,{size:r,squares:i.squares,onClick:function(s,t){return e.swap(s,t)}})}),Object(f.jsxs)("div",{className:"game-info",children:[Object(f.jsx)("div",{children:l}),Object(f.jsx)("div",{children:function(s){return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return e.jumpTo(s-1)},children:"prev"}),Object(f.jsx)("input",{type:"text",className:"lbl",value:e.state.temp,onChange:function(s){return e.handleStepNumberInput(s)},onKeyPress:function(s){return e.handleStepNumberInput(s)}}),Object(f.jsx)("button",{onClick:function(){return e.jumpTo(s+1)},children:"next"})]})})}(s)})]})]})}}]),t}(r.a.Component);o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(N,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.c1ca6066.chunk.js.map